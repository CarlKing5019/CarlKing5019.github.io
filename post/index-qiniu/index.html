<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  
  <title>如何为七牛云生成索引目录？ | Hogwarts</title>
  <meta name="author" content="Carl King">
  
  <meta name="description" content="继续折腾，七牛云。">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

  <meta property="og:title" content="如何为七牛云生成索引目录？"/>
  <meta property="og:site_name" content="Hogwarts"/>

  <link rel="alternate" href="/atom.xml" title="Hogwarts" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  <!-- 被墙 <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script> -->
    <!-- <script src="//lib.sinaapp.com/js/jquery/1.8.3/jquery.min.js"></script> -->
    <script src="/js/jquery.min.2.0.3.js"> </script>
  
  

  <meta property="wb:webmaster" content="e9d0b5d9cad42cf4" />
  <meta property="qc:admins" content="214253361253561667" />
</head>


<body>
  <div class="wrapper">
    <header id="header"><div class="title">
  <h1><a href="/">Hogwarts</a></h1>
  <p><a href="/">A funny, exciting blog</a></p>
</div>
<!--
<div>
<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
 <input style="width:60px;background-color:transparent;text-align:center; border-width:0px;border-top-style: none; border-right-style: none; border-left-style: none; border-bottom-style: none; "  type="search" name="q" id="search" autocomplete="off" autocorrect="off" autocapitalize="off" maxlength="20" placeholder="s" />
 <input type="hidden" name="q" value="site:">
</form>
</div>
-->
<nav class="nav">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
      <li><a href="/tags">Tags</a></li>
    
      <li><a href="/essay">Essays</a></li>
    
      <li><a href="/about">About</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
    <div class="content"><article class="post">
  <header>
    
      <div class="icon"></div>
      <time datetime="2015-11-29T16:00:00.000Z">
  <!-- <a href="/archives/2015/11/"> -->
  <a href="/archives/2015/">
    2015-11-30
  </a>
</time>

    
    
  
    <h1 class="title">如何为七牛云生成索引目录？</h1>
  

  </header>
  
  <div class="entry">
    
      <p><img src="http://assets.qiniu.com/qiniu-409x220.png" alt=""></p>
<p>题图：七牛云存储</p>
<h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>前一篇的 <a href="http://cnfeat.com/blog/2015/11/24/qiniu/" target="_blank" rel="external">如何使用七牛云做为图床？ - 读立写生</a></p>
<p>想必都已经能用 命令行 上传图片了。</p>
<blockquote>
<p>其实，如果你能上传图片，理论上也能上传其他格式文件了，例如：keynote、ppt、excel等。</p>
</blockquote>
<p>可文件一多，找起来就比较麻烦，这时你可能想在 七牛空间 建立子目录了，例如</p>
<ul>
<li>将 图片 放在 image 文件夹</li>
<li>将 pdf 放在 pdf 文件夹</li>
<li>将 录音 放在 tapes 文件夹</li>
<li>……</li>
</ul>
<p>可是，七牛云 空间是没有目录概念的，或者说，它只有一个根目录。</p>
<p>如果你在 <a href="https://portal.qiniu.com/" target="_blank" rel="external">七牛云网页空间</a>上传过图片，你就能深切地体会到了，所有的文件都放在一个目录，如果没有极好的命名习惯，那将是一场灾难。</p>
<p>各位感受一下：</p>
<p><img src="http://cnfeat.qiniudn.com/image/qiniu-portal.jpg" alt=""></p>
<p>如上就是我还没为七牛建立目录的样子。</p>
<p>那么，如何管理好 七牛云 空间？为其建立目录索引呢？</p>
<h2 id="七牛云-特性须知"><a href="#七牛云-特性须知" class="headerlink" title="七牛云 特性须知"></a>七牛云 特性须知</h2><h3 id="单向数据同步服务"><a href="#单向数据同步服务" class="headerlink" title="单向数据同步服务"></a>单向数据同步服务</h3><p>在动手折腾目录之前，你必须知道 七牛云 的特性：</p>
<ul>
<li>一般的云盘是 <code>双向数据同步空间服务</code>，如何解释呢？举个例子<ul>
<li>百度云、微云、360网盘、dropbox 等就是使用<code>双向数据同步空间服务</code><ul>
<li>你在本地增加一个 cnfeat.txt 文件</li>
<li>同步之后，云盘多了一个 cnfeat.txt 文件</li>
<li>你在本地删除一个 cnfeat.txt 文件</li>
<li>同步之后，云盘少了一个 cnfeat.txt 文件</li>
</ul>
</li>
</ul>
</li>
<li>七牛云 不同于以上的 云盘，它是 <code>单向数据同步服务</code><ul>
<li>何为 <code>单向数据同步服务</code>？ 简单地来说，你可以想像 七牛云空间 就像是你私人邮箱，你将本地文件发送到你的邮箱，七牛云有了副本，就算本地的文件删除了，七牛云上的文件依然存在，除非你去邮箱删除。<ul>
<li>你在本地增加一个 cnfeat.txt 文件</li>
<li>同步之后，七牛云多了一个 cnfeat.txt 文件</li>
<li>你在本地删除一个 cnfeat.txt 文件</li>
<li>同步之后，七牛云的 cnfeat.txt 文件依然还在！</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>那么，如何删除 七牛云 的数据？</p>
<p>暂时发现的方法</p>
<ul>
<li>（1）登录网页版，搜索文件删除；</li>
<li>（2）利用<a href="http://developer.qiniu.com/demo/index.html" target="_blank" rel="external">Demo 集锦- 七牛云存储</a>的 <a href="https://chrome.google.com/webstore/detail/qiniu-upload-files/emmfkgdgapbjphdolealbojmcmnphdcc" target="_blank" rel="external">qiniu upload files</a> 插件 删除</li>
</ul>
<h3 id="目录理解"><a href="#目录理解" class="headerlink" title="目录理解"></a>目录理解</h3><ul>
<li>既然前面说了 七牛云 是没有目录的，那如何理解 七牛云 的目录？<ul>
<li>比如：<code>http://cnfeat.qiniudn.com/image/cnfeat-img.jpg</code></li>
<li>你会以为<code>cnfeat-img.jpg</code>是存在<code>image</code>文件夹下，而实际上，七牛云是没有 <code>image</code> 文件夹的</li>
<li>所以 <code>image/cnfeat-img.jpg</code> 它就一个完整的文件名</li>
<li>看下图：</li>
</ul>
</li>
</ul>
<p><img src="http://cnfeat.qiniudn.com/image/Cap-cnfeat-img.jpg" alt=""></p>
<p>但这并不意味着你需要为每个文件起个类似 <code>image/cnfeat-img.jpg</code> 的文件名，你只需要在 七牛云 建立目录即可。</p>
<h2 id="如何为-七牛云-建立目录"><a href="#如何为-七牛云-建立目录" class="headerlink" title="如何为 七牛云 建立目录?"></a>如何为 七牛云 建立目录?</h2><h3 id="准备工具"><a href="#准备工具" class="headerlink" title="准备工具"></a>准备工具</h3><ul>
<li>footer-7niu.html</li>
<li>gen4idx.py</li>
</ul>
<p>链接: <a href="http://pan.baidu.com/s/1i49VE9R" target="_blank" rel="external">http://pan.baidu.com/s/1i49VE9R</a> 密码: w4gx</p>
<h3 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h3><p>以上的工具是 大妈 自行制作的索引页面生成脚本。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line"></div><div class="line">python gen4idx.py /path/2/gen /path/2/foot.html[模板] excludePath</div><div class="line">                     |               |                   +- 排除的目录</div><div class="line">                     |               +- 就是footer-7niu.html</div><div class="line">                     +- 扫描的起始目录</div></pre></td></tr></table></figure>
<p>如果文件目录不复杂，直接用以下的命令即可</p>
<p><code>python gen4idx.py ./ footer-7niu.html NULL</code></p>
<p>每次运行，都会在本地生成一个 <code>index.html</code> 的文件索引文件，上传至 七牛云 中，就可以在指定的地址中直观地查看文件。</p>
<h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><p>将以上的 <code>footer-7niu.html</code><br>和 <code>gen4idx.py</code> 文件 放入你的需同步的本地目录中</p>
<ul>
<li>例如我的本地目录是 <code>/Users/cnfeat/Documents/qrsync/blog</code></li>
</ul>
<p>放置后的目录如下：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line"></div><div class="line">/Users/cnfeat/Documents/qrsync/blog/</div><div class="line">    +- footer-7niu.html</div><div class="line">    +- gen4idx.py</div><div class="line">    +- image</div><div class="line">	|   +- cnfeat-img.jpg</div><div class="line">	|   +- ...</div><div class="line">    +- pdf</div><div class="line">    |   +- WOOP-Toolkit-for-Educators-中文.pdf</div><div class="line">    |   +- ...</div><div class="line">    +- ...</div></pre></td></tr></table></figure>
<p><img src="http://cnfeat.qiniudn.com/image/7niu-local-set.jpg" alt=""></p>
<p>多出了的 <code>index.html</code>如何生成呢？</p>
<h3 id="建立目录索引"><a href="#建立目录索引" class="headerlink" title="建立目录索引"></a>建立目录索引</h3><ul>
<li>用 终端 进入本地同步目录<ul>
<li>打开 终端 输入 <code>cd /Users/cnfeat/Documents/qrsync/blog</code></li>
</ul>
</li>
<li>运行脚本，生成 <code>index.html</code> <ul>
<li>终端 输入 <code>python gen4idx.py ./ footer-7niu.html NULL</code></li>
</ul>
</li>
<li>运行 七牛同步命令行 将 <code>index.html</code> 上传至 七牛云<ul>
<li>终端 输入 <code>qrsync /Users/cnfeat/7niu/cnfeat.json</code></li>
<li><a href="http://cnfeat.com/blog/2015/11/24/qiniu/" target="_blank" rel="external">如何使用七牛云做为图床？ - 读立写生</a></li>
</ul>
</li>
<li>验证<ul>
<li>打开 <code>http://cnfeat.qiniudn.com/</code> 发现页面如下，证明<code>index.html</code>生成并渲染成功</li>
</ul>
</li>
</ul>
<p><img src="http://cnfeat.qiniudn.com/image/7niu-index.jpg" alt=""></p>
<h3 id="补充说明"><a href="#补充说明" class="headerlink" title="补充说明"></a>补充说明</h3><ul>
<li>因为 七牛云 是 <code>单向数据同步服务</code></li>
<li>所以，索引目录几乎只能是个人本地实时的目录<ul>
<li>注定了 主干目录 只能由少数人生成，其他人在 支干目录 协作</li>
</ul>
</li>
<li>如果你在 本地空间 将 已同步的 文件删除</li>
<li>随后再生成的目录将 不再索引出 该文件</li>
<li>你可以用 七牛云网页版 通过 关键词 查找出来</li>
</ul>
<p><img src="http://cnfeat.qiniudn.com/image/index-image-list.jpg" alt=""></p>
<p>或尝试用<a href="http://developer.qiniu.com/demo/index.html" target="_blank" rel="external">Demo 集锦- 七牛云存储</a>的 <a href="https://chrome.google.com/webstore/detail/qiniu-upload-files/emmfkgdgapbjphdolealbojmcmnphdcc" target="_blank" rel="external">qiniu upload files</a> 插件 来查找你的文件。</p>
<h2 id="短化-命令行"><a href="#短化-命令行" class="headerlink" title="短化 命令行"></a>短化 命令行</h2><p>以上的 命令行 不外乎四条，继续用 <a href="http://www.jianshu.com/p/a15a6cb0f08d" target="_blank" rel="external">atext</a> 短化：</p>
<ul>
<li><code>;cg</code>&gt;&gt;<code>cd /Users/cnfeat/Documents/qrsync/blog</code></li>
<li><code>;pf</code>&gt;&gt;<code>python gen4idx.py ./ footer-7niu.html NULL</code></li>
<li><code>;qr</code>&gt;&gt;<code>qrsync /Users/cnfeat/7niu/cnfeat.json</code></li>
<li><code>;pi</code>&gt;&gt;<code>![](http://cnfeat.qiniudn.com/image/)</code></li>
</ul>
<p>搞掂！</p>
<h2 id="迭代"><a href="#迭代" class="headerlink" title="迭代"></a>迭代</h2><ul>
<li>2015-11-29 21:00:53</li>
</ul>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><a href="http://blog.zhgdg.org/2013-08/usage7niu/" target="_blank" rel="external">我们是如何使用7牛云储存的 </a></li>
<li><a href="http://pychina.org/imho/cooperate-guider.html" target="_blank" rel="external">PyCon2014China 志愿者协同手册 PyChina.org</a></li>
<li><a href="https://gitcafe.com/lins05/MkDoc4PyCon/blob/master/README.md" target="_blank" rel="external">cn.pycon.org/2014 官方网站内部维护仓库</a></li>
</ul>
<hr>
<h3 id="【六经皆我注脚】"><a href="#【六经皆我注脚】" class="headerlink" title="【六经皆我注脚】"></a><strong>【六经皆我注脚】</strong></h3><p>《阿甘正传》，当Jenny问Forrest「你为什么对我这么好」</p>
<p>Forrest 回答：「You are my girl.」</p>
<p>你觉得以上这句话如何翻译好？</p>
<hr>
<ul>
<li>陈素封</li>
<li>公众号：cnfeat</li>
<li>Blog：cnfeat.com</li>
</ul>
<p>（题图：七牛云存储）</p>

    
  </div>
  <footer>
    
      
  
  <div class="categories">
    <a href="/categories/blog/">blog</a>
  </div>

      
  
  <div class="tags">
    <a href="/tags/七牛/">七牛</a>, <a href="/tags/图床/">图床</a>
  </div>

    
    <div class="clearfix"></div>
  </footer>
</article>






<!-- baidu tuijian BEGIN -->
<!-- <div id="hm_t_22763"></div> -->
<!-- baidu tuijian BEGIN -->
<!--	<div style="padding-left: 17px;"> -->
<!--		<script src="http://wm.lrswl.com/page/s.php?s=103186&w=640&h=60"></script> -->
<!--	</div> -->



<nav id="pagination">
  
    <a href="/post/dragball-chichi_preview/" class="prev" title= "预告|做赛亚人妻子是什么一种体验？">
    	<span class="abbr">Prev</span>
    	<span class="full">预告|做赛亚人妻子是什么一种体验？</span>
    </a>
  
  
    <a href="/post/if-then/" class="next" title= "如何正确地使用执行意图?">
    	<span class="abbr">Next</span>
    	<span class="full">如何正确地使用执行意图?</span>
    </a>
  
  <div class="clearfix"></div>
</nav>

</div>
  </div>
  <div class="widget-wrapper">
    <aside id="sidebar">
  
  
    
      
      

<div class="widget category first">
  <h3 class="title">Categories</h3>
  <ul class="entry">
  
    <li><a href="/categories/coding/">Coding</a><small>1</small></li>
  
    <li><a href="/categories/blog/">blog</a><small>388</small></li>
  
  </ul>
</div>

    
      
      

<div class="widget tag">
  <h3 class="title">Tags</h3>
  <ul class="entry">
  
    <li><a href="/tags/知识管理/">知识管理</a><small>52</small></li>
  
    <li><a href="/tags/学习/">学习</a><small>35</small></li>
  
    <li><a href="/tags/写作/">写作</a><small>33</small></li>
  
    <li><a href="/tags/千字文/">千字文</a><small>24</small></li>
  
    <li><a href="/tags/总结/">总结</a><small>19</small></li>
  
    <li><a href="/tags/思考/">思考</a><small>18</small></li>
  
    <li><a href="/tags/雕爷/">雕爷</a><small>16</small></li>
  
  </ul>
</div>

    
      
      

<div class="widget recent-posts">
  <h3 class="title">Recent Posts</h3>
  <ul class="entry">
    
      <li>
        <a href="/post/Notes-on-Shell-Scripting/">Notes on Shell Scripting</a>
      </li>
    
      <li>
        <a href="/post/PoemNigt/">读诗的八个夜晚</a>
      </li>
    
      <li>
        <a href="/post/RedAdvantage/">《摔跤吧！爸爸》：红蓝对垒，为何就是红方胜算大？</a>
      </li>
    
      <li>
        <a href="/post/HowElonMuskLearnsFasterAndBetterThanEveryoneElse/">硅谷钢铁侠 Elon Musk 练就超强学习能力的秘密</a>
      </li>
    
      <li>
        <a href="/post/don_norman_on_design_and_emotion/">唐诺德·诺曼：1 个茶壶告诉你什么是好设计</a>
      </li>
    
      <li>
        <a href="/post/Steven-Pinker-WhiteBoard/">史蒂芬·平克：小孩生来就不是一张白纸</a>
      </li>
    
  </ul>
</div>

    
  
</aside>
<div class="clearfix"></div>
  </div>
  <footer id="footer"><div class="theme-copyright">
<div class="copyright">
 &copy; 2016 - 2017 <a href="https://github.com/carlking5019">Carl King</a>
</div>

<div class="powered-by">
Powered by  <a href="https://hexo.io" target="_blank">Hexo </a>
</div>

<div class="theme-info">
 Theme by <a href="https://github.com/bruce-sha/hexo-theme-modernist" target="_blank">Modernist </a> 
 </div>


<div class="busuanzi-count">

<!-- <span id="busuanzi_container_site_pv">Visitors
  <a href="//busuanzi.ibruce.info" target="_blank">
    <span id="busuanzi_value_site_pv"></span>
  </a> -->

<!-- </span>  -->
    <span class="site-uv">
      Unique Visitor
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
    <span class="site-pv">
      Page View
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
</div>

</div>

<div class="clearfix"></div>

<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>


<!-- <div class="copyright" >
  {% set current = date(Date.now(), "YYYY") %}
  &copy; {% if theme.since and theme.since != current %} {{ theme.since }} - {% endif %}
  <span itemprop="copyrightYear">{{ current }}</span>
  <span class="with-love">
    <i class="fa fa-{{ theme.authoricon }}"></i>
  </span>
  <span class="author" itemprop="copyrightHolder"><a href="/">{{ config.author }}</a></span>
</div>

{% if theme.copyright %}
<div class="powered-by">
  {{ __('footer.powered', '<a class="theme-link" href="https://hexo.io">Hexo</a>') }}
</div>

<div class="theme-info">
  {{ __('footer.theme') }} -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.{{ theme.scheme }}
  </a>
</div>
{% endif %} -->
</footer>
  <script src="/js/scale.fix.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
  (function($){
    $('.fancybox').fancybox();
  })(jQuery);
</script>

</body>
</html>